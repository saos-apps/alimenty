shiny::runApp('Desktop/shiny-intro')
shiny::runApp('Desktop/shiny-intro')
runApp('Desktop/shiny-intro', display.mode = "showcase")
shiny::runApp('Desktop/shiny-intro')
shiny::runApp('Desktop/shiny-intro')
shiny::runApp('Desktop/shiny-intro')
counties <- readRDS("shiny-intro/data/counties.rds")
counties <- readRDS('Desktop/shiny-intro/data/counties.rds')
head(counties)
install.packages(c("maps", "mapproj"))
library(maps)
library(mapproj)
source("Desktop/shiny-intro/helpers.R")
counties <- readRDS("Desktop/shiny-intro/data/counties.rds")
percent_map(counties$white, "darkgreen", "% white")
shiny::runApp('Desktop/shiny-intro')
?percent_map
shiny::runApp('Desktop/shiny-intro')
shiny::runApp('Desktop/shiny-intro')
shiny::runApp('Desktop/shiny-intro')
shiny::runApp('Desktop/shiny-intro')
shiny::runApp('Desktop/shiny-intro')
setwd("~/Desktop")
runApp("stockVis")
install.packages("quantmod")
runApp("stockVis")
shiny::runApp('stockVis')
shiny::runApp('stockVis')
shiny::runApp('stockVis')
shiny::runApp('stockVis')
shiny::runApp('stockVis')
shiny::runApp('stockVis')
runGitHub( "shiny-examples", "pawluczuk")
shinyapps::setAccountInfo(
name="pawluczuk",
token="34A3094EE7BA24106FB869904A755EF1",
secret="FLAfxQU2L34lJccTvx2gPEjxYaP0CKjoDNB1VvGI")
shinyapps::setAccountInfo(name='pawluczuk', token='34A3094EE7BA24106FB869904A755EF1', secret='FLAfxQU2L34lJccTvx2gPEjxYaP0CKjoDNB1VvGI')
deployApp()
install.packages("igraphdata")
library(help=igraphdata)
data(karate)
library(igraphdata)
data(karate)
karate
library(igraph)
install.packages("igraph")
library(igraph)
karate
plot(karate)
shiny::runApp('shiny-intro')
karate
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
head(karate)
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
?renderPlot
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
shiny::runApp('shiny-intro')
gplot(karate)
getwd
shiny::runApp('d3net')
shiny::runApp('d3net')
shiny::runApp('d3net')
shiny::runApp('d3net')
shiny::runApp('d3net')
setwd("~/Desktop/law_citation")
library(shiny)
library(devtools)
install_github("bartekch/saos")
library(saos)
runApp()
runApp()
runApp()
runApp()
runApp()
j <- search_judgements("alimenty")
library(saos)
j <- search_judgements("alimenty")
judgments <- search_judgments(all = "dobra osobiste")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
?fluidPage
runApp()
?textInput
runApp()
runApp()
runApp()
print(judgments)
judgments <- search_judgments("dobra osobiste")
judgments_details <- get_judgments(judgments)
judgments_details
runApp()
runApp()
setwd("~/Desktop/law_citation")
library(shiny)
library(saos)
runApp()
library(devtools)
install_github("bartekch/saos")
library(saos)
runApp()
setwd("~/Desktop/alimenty/app")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
loc <- fromJSON(file="www/data/analysis.json")
print(loc)
loc$dataLength
dl <- "dataLength"
loc[dl]
loc[dl]
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
devtools::install_github("pawluczuk/d3net")
devtools::install_github("pawluczuk/d3net")
devtools::install_github("mbojan/d3net")
library(d3net)
setwd("~/Desktop/d3net")
devtools::build()
devtools::install()
library(d3net)
library(igraphdata)
data(karate)
d3net(karate)
devtools::install()
devtools::install()
devtools::install()
devtools::install()
devtools::install()
library(d3net)
d3net(karate)
devtools::install()
library(d3net)
d3net(karate)
devtools::install()
d3net(karate)
devtools::install()
library(d3net)
d3net(karate)
devtools::install()
library(d3net)
d3net(karate)
devtools::install()
library(d3net)
d3net(karate)
devtools::install()
library(d3net)
d3net(karate)
devtools::install()
library(d3net)
d3net(karate)
devtools::install()
d3net(karate)
devtools::install()
d3net(karate)
setwd("~/Desktop/alimenty/app")
runApp()
setwd("~/Desktop/alimenty")
runApp()
runApp('/app')
runApp("./app")
setwd("~/Desktop/alimenty/app")
runApp()
setwd("~/Desktop/alimenty")
load("alimenty-full.rds")
dane <- readRDS("alimenty-full.rds")
dane[1]
m2 <- update(m1, . ~ . + result*judge*defendant)
library(jsonlite)
library(saos)
library(plyr)
library(dplyr)
library(sqldf)
library(tm.plugin.webmining)
library(tm)
#polish stopwords
polishStopWords <- c("a","aby","ach","acz","aczkolwiek","aj","albo","ale","ależ","ani","aż","bardziej","bardzo","bo","bowiem","by","byli","bynajmniej","być","był","była","było","były","będzie","będą","cali","cała","cały","ci","cię","ciebie","co","cokolwiek","coś","czasami","czasem","czemu","czy","czyli","daleko","dla","dlaczego","dlatego","do","dobrze","dokąd","dość","dużo","dwa","dwaj","dwie","dwoje","dziś","dzisiaj","gdy","gdyby","gdyż","gdzie","gdziekolwiek","gdzieś","i","ich","ile","im","inna","inne","inny","innych","iż","ja","ją","jak","jakaś","jakby","jaki","jakichś","jakie","jakiś","jakiż","jakkolwiek","jako","jakoś","je","jeden","jedna","jedno","jednak","jednakże","jego","jej","jemu","jest","jestem","jeszcze","jeśli","jeżeli","już","ją","każdy","kiedy","kilka","kimś","kto","ktokolwiek","ktoś","która","które","którego","której","który","których","którym","którzy","ku","lat","lecz","lub","ma","mają","mało","mam","mi","mimo","między","mną","mnie","mogą","moi","moim","moja","moje","może","możliwe","można","mój","mu","musi","my","na","nad","nam","nami","nas","nasi","nasz","nasza","nasze","naszego","naszych","natomiast","natychmiast","nawet","nią","nic","nich","nie","niech","niego","niej","niemu","nigdy","nim","nimi","niż","no","o","obok","od","około","on","ona","one","oni","ono","oraz","oto","owszem","pan","pana","pani","po","pod","podczas","pomimo","ponad","ponieważ","powinien","powinna","powinni","powinno","poza","prawie","przecież","przed","przede","przedtem","przez","przy","roku","również","sam","sama","są","się","skąd","sobie","sobą","sposób","swoje","ta","tak","taka","taki","takie","także","tam","te","tego","tej","temu","ten","teraz","też","to","tobą","tobie","toteż","trzeba","tu","tutaj","twoi","twoim","twoja","twoje","twym","twój","ty","tych","tylko","tym","u","w","wam","wami","was","wasz","wasza","wasze","we","według","wiele","wielu","więc","więcej","wszyscy","wszystkich","wszystkie","wszystkim","wszystko","wtedy","wy","właśnie","z","za","zapewne","zawsze","ze","zł","znowu","znów","został","żaden","żadna","żadne","żadnych","że","żeby")
# alimony
l <- fromJSON("alimony.json")
o1 <- cbind( data.frame( judgmentId = l$judgmentId), l$value ) # spłaszczenie
# dociągnięcie pozostałych danych
if(FALSE) {
l2 <- get_judgments(l$judgmentId)
saveRDS(l2, file="alimenty-full.rds")
}
l2 <- readRDS("alimenty-full.rds")
o2 <- ldply(l2, function(x) expand.grid(id=x$id, text=extractHTMLStrip(x$textContent), judge=sapply(x$judges, "[[", "name")) )
ds <- DataframeSource(o2)
class(o2)
corpus <- VCorpus(ds)
summary(corpus)
print("Corpus created")
corpus <- tm_map(corpus, content_transformer(tolower))
print("Tolower finished")
corpus <- tm_map(corpus, content_transformer(removeNumbers))
print("RemoveNumbers finished")
corpus <- tm_map(corpus, content_transformer(removeWords), polishStopWords)
print("Removing stopwords finished")
corpus <- tm_map(corpus, content_transformer(stripWhitespace))
# alimony
l <- fromJSON("alimony.json")
o1 <- cbind( data.frame( judgmentId = l$judgmentId), l$value ) # spłaszczenie
# dociągnięcie pozostałych danych
if(FALSE) {
l2 <- get_judgments(l$judgmentId)
saveRDS(l2, file="alimenty-full.rds")
}
l2 <- readRDS("alimenty-full.rds")
o2 <- ldply(l2, function(x) expand.grid(id=x$id, text=extractHTMLStrip(x$textContent), judge=sapply(x$judges, "[[", "name")) )
ds <- DataframeSource(o2)
o2$imie <- sapply(strsplit(o2$judge, " "), "[", 1)
o2$kobieta <- substr( o2$imie, start=nchar(o2$imie), stop=nchar(o2$imie) ) == "a"
o2$kobieta[ grepl("\\.", o2$imie) ] <- NA
o2u <- o2 %>% group_by(id) %>% summarise(pkobieta = mean(kobieta, na.rm=TRUE))
# Połączenie
alimenty <- sqldf("select o1.*, o2u.pkobieta from o1 left join o2u on o1.judgmentId=o2u.id")
svnames <- c("result", "defendantSex")
alimenty[vnames] <- lapply(alimenty[vnames], function(x) {
x[ x=="?" ] <- NA
x
} )
#============================================================================
table(alimenty$reason)
table(alimenty$result)
with(alimenty, table(reason, result))
alimenty$result[ alimenty$result == "zasądza" & alimenty$reason == "o obniżenie alimentów" ] <- "obniża"
alimenty$result[ alimenty$result == "zasądza" & alimenty$reason == "o podwyższenie alimentów" ] <- "podwyższa"
alimenty$result[ alimenty$result == "oddala" & alimenty$reason == "o obniżenie alimentów" ] <- "podwyższa"
alimenty$result[ alimenty$result == "oddala" & alimenty$reason == "o podwyższenie alimentów" ] <- "obniża"
x <- with(alimenty, table(result,
judge=ifelse(pkobieta >= 0.5, "k", "m"),
defendant = defendantSex ))
ftable( aperm(x, c(3,2,1)))
p <- prop.table(x, 2:3)
ftable( aperm(signif(p, 2), c(3,2,1)))
# mydling
d <- as.data.frame(x) %>% filter( !(result %in% c("uchyla", "zasądza", "oddala", "zmienia")) )
m0 <- glm( Freq ~ result + judge * defendant, data=d, family=poisson,
subset=d$defendant != "both")
m1 <- update(m0, . ~ . + result*(judge + defendant))
m2 <- update(m1, . ~ . + result*judge*defendant)
anova(m0, m1, m2, test="Chisq")
AIC(m0, m1, m2)
#============================================================================
s <- alimenty %>%
mutate(judge = ifelse(pkobieta >= 0.5, "k", "m"),
defendant = defendantSex,
result = (result == "podwyższa") ) %>%
filter(!(result %in% c("oddala", "uchyla", "zasądza", "zmienia"))) %>%
filter( defendant != "both" )
m0 <- glm(result ~ judge + defendant, data=s, family=binomial("logit"))
m1 <- update(m0, . ~ . + judge * defendant )
AIC(m0, m1)
o2u
library(RJSONIO)
exportJson <- toJSON(o2u)
write(exportJson, "kobietySklad.json")
DataframeSource(o2u)
DataframeSource(o2u)[1]
o2u <- o2 %>% group_by(id) %>% summarise(pkobieta = mean(kobieta, na.rm=FALSE))
o2u[1]
o2u[,1]
o2u[1,]
length(o2u)
dim(o2u)
dim(o2u)[1]
o2 <- ldply(l2, function(x) expand.grid(id=x$id, text=extractHTMLStrip(x$textContent), judge=sapply(x$judges, "[[", "name")) )
ds <- DataframeSource(o2)
o2$imie <- sapply(strsplit(o2$judge, " "), "[", 1)
o2$kobieta <- substr( o2$imie, start=nchar(o2$imie), stop=nchar(o2$imie) ) == "a"
o2$kobieta[ grepl("\\.", o2$imie) ] <- "?"
o2u <- o2 %>% group_by(id) %>% summarise(pkobieta = mean(kobieta, na.rm=FALSE))
o2u <- o2 %>% group_by(id) %>% summarise(pkobieta = mean(kobieta, na.rm=TRUE))
View(alimenty)
View(`o2u`)
o2$imie <- sapply(strsplit(o2$judge, " "), "[", 1)
o2$kobieta <- substr( o2$imie, start=nchar(o2$imie), stop=nchar(o2$imie) ) == "a"
o2$kobieta[ grepl("\\.", o2$imie) ] <- NA
o2u <- o2 %>% group_by(id) %>% summarise(pkobieta = mean(kobieta, na.rm=TRUE))
View(`o2u`)
exportJSON <- list()
i = 0
while (i < dim(o2u)[1]) {
obj <- list()
obj$id <- o2u[i, 1]
obj$pkobieta <- o2u[i, 2]
exportJson[[length(exportJson)+1]] <- obj
i = i + 1
}
exportJSON <- list()
i = 0
while (i < dim(o2u)[1]) {
obj <- list()
obj$id <- o2u[i, 1]
obj$pkobieta <- o2u[i, 2]
exportJson[length(exportJson)+1] <- obj
i = i + 1
}
exportJSON <- list()
i = 1
while (i < dim(o2u)[1]) {
obj <- list()
obj$id <- o2u[i, 1]
obj$pkobieta <- o2u[i, 2]
exportJson[length(exportJson)+1] <- obj
i = i + 1
}
exportJSON <- list()
data.frame(o2u)
data.frame(o2u)[1]
class(o2u)
as.data.frame(o2u)
class(judgments)
exportJSON <- list()
i = 1
while (i < dim(o2u)[1]) {
obj <- list()
obj$id <- o2u[i, 1]
obj$pkobieta <- o2u[i, 2]
exportJSON[length(exportJSON)+1] <- obj
i = i + 1
}
exportJSON <- list()
i = 1
while (i <= dim(o2u)[1]) {
obj <- list()
obj$id <- o2u[i, 1]
obj$pkobieta <- o2u[i, 2]
print(obj)
exportJSON[length(exportJSON)+1] <- obj
i = i + 1
}
print(o2u[i,1])
print(o2u[i,1]$id)
exportJSON <- list()
i = 1
while (i <= dim(o2u)[1]) {
obj <- list()
obj$id <- o2u[i, 1]$id
obj$pkobieta <- o2u[i, 2]$pkobieta
exportJSON[length(exportJSON)+1] <- obj
i = i + 1
}
exportJSON <- list()
i = 1
while (i <= dim(o2u)[1]) {
obj <- list()
obj$id <- o2u[i, 1]$id
obj$pkobieta <- o2u[i, 2]$pkobieta
print(obj)
exportJSON[length(exportJSON)+1] <- obj
i = i + 1
}
exportJSON <- list()
i = 1
while (i <= dim(o2u)[1]) {
#obj <- list()
obj$id <- o2u[i, 1]$id
obj$pkobieta <- o2u[i, 2]$pkobieta
print(obj)
exportJSON[length(exportJSON)+1] <- obj
i = i + 1
}
warnings()
l[1]
alimenty[1]
s[1]
toJSON(as.data.frame(t(o2u)))
write(toJSON(as.data.frame(t(o2u))), "kobietSklad.json")
setwd("~/Desktop/alimenty/app")
runApp()
library(rjson)
unloadNamespace("RJSONIO")
detach("RSJONIO")
runApp()
